(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{38:e=>{e.exports={style:{fontFamily:"'Great Vibes', 'Great Vibes Fallback'",fontWeight:400,fontStyle:"normal"},className:"__className_a10525",variable:"__variable_a10525"}},347:()=>{},837:e=>{e.exports={style:{fontFamily:"'Unbounded', 'Unbounded Fallback'",fontWeight:200,fontStyle:"normal"},className:"__className_5d4052",variable:"__variable_5d4052"}},1544:e=>{e.exports={style:{fontFamily:"'Montserrat', 'Montserrat Fallback'",fontStyle:"normal"},className:"__className_de98d4",variable:"__variable_de98d4"}},6448:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,6874,23)),Promise.resolve().then(r.t.bind(r,3063,23)),Promise.resolve().then(r.t.bind(r,1544,23)),Promise.resolve().then(r.t.bind(r,837,23)),Promise.resolve().then(r.t.bind(r,7527,23)),Promise.resolve().then(r.t.bind(r,38,23)),Promise.resolve().then(r.bind(r,3568)),Promise.resolve().then(r.t.bind(r,347,23)),Promise.resolve().then(r.bind(r,272)),Promise.resolve().then(r.bind(r,3458)),Promise.resolve().then(r.bind(r,6803)),Promise.resolve().then(r.bind(r,8800))},7527:e=>{e.exports={style:{fontFamily:"'Rubik Mono One', 'Rubik Mono One Fallback'",fontWeight:400,fontStyle:"normal"},className:"__className_1a2b62",variable:"__variable_1a2b62"}},8800:(e,t,r)=>{"use strict";r.d(t,{CartProvider:()=>o,_:()=>c});var a=r(5155),n=r(2115),i=r(3568);let l=(0,n.createContext)(),s=(e,t)=>{switch(t.type){case"INIT_CART":return t.payload||[];case"ADD_TO_CART":{let r=e.find(e=>e.id===t.product.id&&e.selectedOption===t.product.selectedOption);if(r){if(r.quantity>=10)return e;return e.map(e=>e.id===t.product.id&&e.selectedOption===t.product.selectedOption?{...e,quantity:Math.min(e.quantity+1,10)}:e)}return[...e,{...t.product,quantity:1}]}case"REMOVE_FROM_CART":return e.filter(e=>e.id!==t.id||e.selectedOption!==t.option);case"INCREMENT_QUANTITY":return e.map(e=>e.id===t.id&&e.selectedOption===t.option?e.quantity>=10?e:{...e,quantity:Math.min(e.quantity+1,10)}:e);case"DECREMENT_QUANTITY":return e.map(e=>e.id===t.id&&e.selectedOption===t.option?{...e,quantity:Math.max(1,e.quantity-1)}:e);case"CLEAR_CART":return[];default:return e}},o=e=>{let{children:t}=e,[r,o]=(0,n.useReducer)(s,[]),c=(0,n.useRef)(!1),u=(0,n.useRef)(null),d=(0,n.useRef)([]);(0,n.useEffect)(()=>{let e=localStorage.getItem("cart");if(e)try{let t=JSON.parse(e);o({type:"INIT_CART",payload:t}),d.current=t}catch(e){localStorage.removeItem("cart")}},[]),(0,n.useEffect)(()=>{JSON.stringify(d.current)!==JSON.stringify(r)&&(r.length>0?localStorage.setItem("cart",JSON.stringify(r)):localStorage.removeItem("cart"),d.current=r)},[r]),(0,n.useEffect)(()=>()=>{u.current&&clearTimeout(u.current)},[]);let _=(0,n.useCallback)(e=>{let t=r.find(t=>t.id===e.id&&t.selectedOption===e.selectedOption);if((null==t?void 0:t.quantity)>=10){c.current||(i.oR.error("Нельзя добавить больше 10 штук этого букета в корзину"),c.current=!0,u.current=setTimeout(()=>{c.current=!1},3e3));return}o({type:"ADD_TO_CART",product:e})},[r]),m=(0,n.useCallback)((e,t)=>{let a=r.find(r=>r.id===e&&r.selectedOption===t);if((null==a?void 0:a.quantity)>=10){c.current||(i.oR.error("Максимум 10 штук одного букета"),c.current=!0,u.current=setTimeout(()=>{c.current=!1},3e3));return}o({type:"INCREMENT_QUANTITY",id:e,option:t})},[r]),b=(0,n.useCallback)((e,t)=>{o({type:"REMOVE_FROM_CART",id:e,option:t}),c.current=!1},[]),p=(0,n.useCallback)((e,t)=>{o({type:"DECREMENT_QUANTITY",id:e,option:t}),c.current=!1},[]),y=(0,n.useCallback)(()=>{o({type:"CLEAR_CART"}),c.current=!1},[]);return(0,a.jsx)(l.Provider,{value:{cart:r,addToCart:_,removeFromCart:b,increaseQuantity:m,decreaseQuantity:p,clearCart:y},children:t})},c=()=>(0,n.useContext)(l)},9516:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a={src:"/_next/static/media/arrow.2bc10128.svg",height:683,width:683,blurWidth:0,blurHeight:0}}},e=>{var t=t=>e(e.s=t);e.O(0,[886,213,452,444,773,937,874,63,441,684,358],()=>t(6448)),_N_E=e.O()}]);